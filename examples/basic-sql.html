<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Basic SQL Example</title>
	
	<script src="../dist/sql.min.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', (event) => {
			const view = cm6.load().textarea(document.getElementById('editor'));
		});
	</script>
</head>

<body>
	<textarea id="editor">WITH employee_ranking AS (
	SELECT
		employee_id,
		last_name,
		first_name,
		salary,
		dept_id
		RANK() OVER (PARTITION BY dept_id ORDER BY salary DESC) AS ranking
	FROM employee
)

SELECT
	dept_id,
	employee_id,
	last_name,
	first_name,
	salary
FROM employee_ranking
WHERE ranking = 2
ORDER BY dept_id, last_name</textarea>
</body>
</html>